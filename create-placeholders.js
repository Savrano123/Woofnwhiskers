const fs = require('fs');
const path = require('path');

// Function to create directory if it doesn't exist
function ensureDirectoryExists(directory) {
  if (!fs.existsSync(directory)) {
    console.log(`Creating directory: ${directory}`);
    fs.mkdirSync(directory, { recursive: true });
  }
}

// Create necessary directories
const publicDir = path.join(process.cwd(), 'public');
const imagesDir = path.join(publicDir, 'images');
ensureDirectoryExists(imagesDir);

const petsDir = path.join(imagesDir, 'pets');
ensureDirectoryExists(petsDir);

const productsDir = path.join(imagesDir, 'products');
ensureDirectoryExists(productsDir);

const carouselDir = path.join(imagesDir, 'carousel');
ensureDirectoryExists(carouselDir);

// Create a simple 1x1 pixel JPEG
const jpegBuffer = Buffer.from([
  0xff, 0xd8, 0xff, 0xe0, 0x00, 0x10, 0x4a, 0x46, 0x49, 0x46, 0x00, 0x01, 0x01, 0x01, 0x00, 0x48,
  0x00, 0x48, 0x00, 0x00, 0xff, 0xdb, 0x00, 0x43, 0x00, 0x08, 0x06, 0x06, 0x07, 0x06, 0x05, 0x08,
  0x07, 0x07, 0x07, 0x09, 0x09, 0x08, 0x0a, 0x0c, 0x14, 0x0d, 0x0c, 0x0b, 0x0b, 0x0c, 0x19, 0x12,
  0x13, 0x0f, 0x14, 0x1d, 0x1a, 0x1f, 0x1e, 0x1d, 0x1a, 0x1c, 0x1c, 0x20, 0x24, 0x2e, 0x27, 0x20,
  0x22, 0x2c, 0x23, 0x1c, 0x1c, 0x28, 0x37, 0x29, 0x2c, 0x30, 0x31, 0x34, 0x34, 0x34, 0x1f, 0x27,
  0x39, 0x3d, 0x38, 0x32, 0x3c, 0x2e, 0x33, 0x34, 0x32, 0xff, 0xc0, 0x00, 0x0b, 0x08, 0x00, 0x01,
  0x00, 0x01, 0x01, 0x01, 0x11, 0x00, 0xff, 0xc4, 0x00, 0x14, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xc4, 0x00, 0x14,
  0x10, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xff, 0xda, 0x00, 0x08, 0x01, 0x01, 0x00, 0x00, 0x3f, 0x00, 0x37, 0xff, 0xd9
]);

// Create placeholder images
const placeholders = [
  path.join(imagesDir, 'placeholder-pet.jpg'),
  path.join(imagesDir, 'placeholder-product.jpg'),
  path.join(petsDir, 'max.jpg'),
  path.join(petsDir, 'default.jpg'),
  path.join(productsDir, 'default.jpg'),
  path.join(productsDir, 'pet-bed.jpg'),
  path.join(carouselDir, 'default.jpg'),
  path.join(carouselDir, 'slide1.jpg')
];

placeholders.forEach(placeholder => {
  if (!fs.existsSync(placeholder)) {
    console.log(`Creating placeholder: ${placeholder}`);
    fs.writeFileSync(placeholder, jpegBuffer);
  }
});

console.log('All placeholder images created successfully!');
